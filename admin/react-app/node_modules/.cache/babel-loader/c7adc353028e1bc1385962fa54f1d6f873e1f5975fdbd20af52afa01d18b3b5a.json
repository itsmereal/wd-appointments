{"ast":null,"code":"var _container$dataset;import React from'react';import ReactDOM from'react-dom/client';import{BrowserRouter}from'react-router-dom';import CssBaseline from'@mui/material/CssBaseline';import{LocalizationProvider}from'@mui/x-date-pickers';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import App from'./App';// Get the container element and initial page from WordPress\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const container=document.getElementById('wd-appointments-admin-app');const page=(container===null||container===void 0?void 0:(_container$dataset=container.dataset)===null||_container$dataset===void 0?void 0:_container$dataset.page)||'dashboard';// Create root and render app\nconst root=ReactDOM.createRoot(container);root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(BrowserRouter,{basename:\"/wp-admin/admin.php\",children:/*#__PURE__*/_jsxs(LocalizationProvider,{dateAdapter:AdapterDateFns,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(App,{initialPage:page})]})})}));// Handle WordPress admin menu highlighting\nconst highlightAdminMenu=()=>{const menuRoot=document.getElementById('toplevel_page_wd-appointments');if(!menuRoot)return;// Remove current highlighting\nconst currentMenuItems=document.querySelectorAll('.current');currentMenuItems.forEach(item=>{item.classList.remove('current');});// Add highlighting based on current page\nconst path=window.location.pathname;const searchParams=new URLSearchParams(window.location.search);const page=searchParams.get('page');if(page!==null&&page!==void 0&&page.startsWith('wd-appointments')){menuRoot.classList.add('wp-has-current-submenu','wp-menu-open');menuRoot.classList.remove('wp-not-current-submenu');// Find and highlight the correct submenu item\nconst submenuItems=menuRoot.querySelectorAll('.wp-submenu li');submenuItems.forEach(item=>{const link=item.querySelector('a');if(link!==null&&link!==void 0&&link.href.includes(page)){item.classList.add('current');}});}};// Listen for route changes to update menu highlighting\nwindow.addEventListener('popstate',highlightAdminMenu);highlightAdminMenu();// Handle WordPress admin notices\nconst handleAdminNotices=()=>{const notices=document.querySelectorAll('.notice:not(.wd-appointments-notice)');notices.forEach(notice=>{// Move notices into our app container if they're related to our plugin\nif(notice.textContent.toLowerCase().includes('wd appointments')){const noticesContainer=document.createElement('div');noticesContainer.className='wd-appointments-notices';container.parentNode.insertBefore(noticesContainer,container);noticesContainer.appendChild(notice);}});};// Handle notices when DOM changes\nconst observer=new MutationObserver(handleAdminNotices);observer.observe(document.body,{childList:true,subtree:true});handleAdminNotices();// Cleanup function\nwindow.addEventListener('beforeunload',()=>{observer.disconnect();window.removeEventListener('popstate',highlightAdminMenu);});// Export for testing\nexport const __TEST__={highlightAdminMenu,handleAdminNotices};","map":{"version":3,"names":["React","ReactDOM","BrowserRouter","CssBaseline","LocalizationProvider","AdapterDateFns","App","jsx","_jsx","jsxs","_jsxs","container","document","getElementById","page","_container$dataset","dataset","root","createRoot","render","StrictMode","children","basename","dateAdapter","initialPage","highlightAdminMenu","menuRoot","currentMenuItems","querySelectorAll","forEach","item","classList","remove","path","window","location","pathname","searchParams","URLSearchParams","search","get","startsWith","add","submenuItems","link","querySelector","href","includes","addEventListener","handleAdminNotices","notices","notice","textContent","toLowerCase","noticesContainer","createElement","className","parentNode","insertBefore","appendChild","observer","MutationObserver","observe","body","childList","subtree","disconnect","removeEventListener","__TEST__"],"sources":["/Users/real/Local Sites/wdbooking/app/public/wp-content/plugins/wd-appointments/admin/react-app/src/index.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport App from './App';\n\n// Get the container element and initial page from WordPress\nconst container = document.getElementById('wd-appointments-admin-app');\nconst page = container?.dataset?.page || 'dashboard';\n\n// Create root and render app\nconst root = ReactDOM.createRoot(container);\nroot.render(\n  <React.StrictMode>\n    <BrowserRouter basename=\"/wp-admin/admin.php\">\n      <LocalizationProvider dateAdapter={AdapterDateFns}>\n        <CssBaseline />\n        <App initialPage={page} />\n      </LocalizationProvider>\n    </BrowserRouter>\n  </React.StrictMode>\n);\n\n// Handle WordPress admin menu highlighting\nconst highlightAdminMenu = () => {\n  const menuRoot = document.getElementById('toplevel_page_wd-appointments');\n  if (!menuRoot) return;\n\n  // Remove current highlighting\n  const currentMenuItems = document.querySelectorAll('.current');\n  currentMenuItems.forEach(item => {\n    item.classList.remove('current');\n  });\n\n  // Add highlighting based on current page\n  const path = window.location.pathname;\n  const searchParams = new URLSearchParams(window.location.search);\n  const page = searchParams.get('page');\n\n  if (page?.startsWith('wd-appointments')) {\n    menuRoot.classList.add('wp-has-current-submenu', 'wp-menu-open');\n    menuRoot.classList.remove('wp-not-current-submenu');\n\n    // Find and highlight the correct submenu item\n    const submenuItems = menuRoot.querySelectorAll('.wp-submenu li');\n    submenuItems.forEach(item => {\n      const link = item.querySelector('a');\n      if (link?.href.includes(page)) {\n        item.classList.add('current');\n      }\n    });\n  }\n};\n\n// Listen for route changes to update menu highlighting\nwindow.addEventListener('popstate', highlightAdminMenu);\nhighlightAdminMenu();\n\n// Handle WordPress admin notices\nconst handleAdminNotices = () => {\n  const notices = document.querySelectorAll('.notice:not(.wd-appointments-notice)');\n  notices.forEach(notice => {\n    // Move notices into our app container if they're related to our plugin\n    if (notice.textContent.toLowerCase().includes('wd appointments')) {\n      const noticesContainer = document.createElement('div');\n      noticesContainer.className = 'wd-appointments-notices';\n      container.parentNode.insertBefore(noticesContainer, container);\n      noticesContainer.appendChild(notice);\n    }\n  });\n};\n\n// Handle notices when DOM changes\nconst observer = new MutationObserver(handleAdminNotices);\nobserver.observe(document.body, {\n  childList: true,\n  subtree: true\n});\nhandleAdminNotices();\n\n// Cleanup function\nwindow.addEventListener('beforeunload', () => {\n  observer.disconnect();\n  window.removeEventListener('popstate', highlightAdminMenu);\n});\n\n// Export for testing\nexport const __TEST__ = {\n  highlightAdminMenu,\n  handleAdminNotices\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}